<div class="force-container">
  <div class="force-card">
    
    <div class="text-center mb-4">
      <div class="icon-circle mb-3">
        <i class="bi bi-shield-lock-fill text-warning" style="font-size: 2.5rem;"></i>
      </div>
      <h3 class="text-white fw-bold">Seguridad Requerida</h3>
      <p class="text-muted small">
        Es tu primer ingreso o tu cuenta fue reiniciada.<br>
        Por favor, establece una nueva contraseña personal.
      </p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      
      <div class="mb-3">
        <label class="form-label text-secondary small fw-bold">NUEVA CONTRASEÑA</label>
        <div class="input-group">
            <span class="input-group-text bg-dark border-secondary text-secondary"><i class="bi bi-key"></i></span>
            <input type="password" class="form-control bg-dark text-white border-secondary" 
               formControlName="password" placeholder="Mínimo 6 caracteres">
        </div>
        <div *ngIf="form.get('password')?.touched && form.get('password')?.invalid" class="text-danger small mt-1">
           <i class="bi bi-exclamation-circle"></i> Mínimo 6 caracteres.
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label text-secondary small fw-bold">CONFIRMAR CONTRASEÑA</label>
        <div class="input-group">
            <span class="input-group-text bg-dark border-secondary text-secondary"><i class="bi bi-check-circle"></i></span>
            <input type="password" class="form-control bg-dark text-white border-secondary" 
               formControlName="confirmPassword" placeholder="Repite la contraseña">
        </div>
        <div *ngIf="form.hasError('notMatching') && form.get('confirmPassword')?.touched" class="text-danger small mt-1">
           <i class="bi bi-x-circle"></i> Las contraseñas no coinciden.
        </div>
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-warning fw-bold py-2" [disabled]="form.invalid || isSubmitting">
          <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1"></span>
          <span *ngIf="!isSubmitting">ACTUALIZAR Y CONTINUAR <i class="bi bi-arrow-right ms-1"></i></span>
        </button>
      </div>
    </form>
  </div>
</div>